import{e as U,V as C,c as R,d as H,a as T,b as N,u as F,M as G}from"./v-button-BlfzCGaB.js";import{d as V,B as j,C as w,r,o as d,c as $,w as a,a as o,b as n,A as O,_ as E,f as B,D as M,F as J,e as _,G as W,H as X,I as S,T as Q,J as k,x as A,y as L,K as f,L as I,M as P}from"./index-CH_azRD5.js";const Y=V({name:"VProductsAdd",components:{VSkeleton:U,VText:C,VButton:R,VInput:H,VFlex:T},data(){return{addModel:""}},computed:{...j(["is_loading"]),is_products_loading(){return this.is_loading(w.LIST)}},methods:{addProduct(){}}});function Z(e,t,m,g,y,v){const i=r("v-input"),l=r("v-button"),p=r("v-flex"),s=r("v-text"),u=r("v-skeleton");return d(),$(p,{class:"v-products-add",column:"",gap:"4"},{default:a(()=>[o(p,{is:"form",row:"",align:"flex-end",justify:"flex-start",gap:"20",onSubmit:O(e.addProduct,["prevent"])},{default:a(()=>[o(i,{class:"v-products-add__input",label:"Добавление товаров",modelValue:e.addModel,"onUpdate:modelValue":t[0]||(t[0]=b=>e.addModel=b),placeholder:"Введите артикул продавца, артикул WB или ссылку на товар",loading:e.is_products_loading},null,8,["modelValue","loading"]),o(l,{class:"v-products-add__button",type:"submit",loading:e.is_products_loading,disabled:e.addModel.length===0},{default:a(()=>[n("Добавить")]),_:1},8,["loading","disabled"])]),_:1},8,["onSubmit"]),o(p,{row:"",gap:"2",align:"flex-start",justify:"flex-start",wrap:"",width:"100%"},{default:a(()=>[o(s,{preset:"caption",nowrap:""},{default:a(()=>[n("Например ваши товары:")]),_:1}),o(u,{width:"60",height:"16",loading:e.is_products_loading},{default:a(()=>[o(p,{row:"",gap:"2",wrap:"",width:"max-content"},{default:a(()=>[o(s,{class:"v-products-add__fast-input",as:"button",preset:"caption",decoration:"dashed underline",onClick:t[1]||(t[1]=b=>e.addModel="119203059")},{default:a(()=>[n("119203059,")]),_:1}),o(s,{class:"v-products-add__fast-input",as:"button",preset:"caption",decoration:"dashed underline",onClick:t[2]||(t[2]=b=>e.addModel="124366343")},{default:a(()=>[n("124366343,")]),_:1}),o(s,{class:"v-products-add__fast-input",as:"button",preset:"caption",decoration:"dashed underline",onClick:t[3]||(t[3]=b=>e.addModel="59801844")},{default:a(()=>[n("59801844")]),_:1})]),_:1})]),_:1},8,["loading"])]),_:1})]),_:1})}const ee=E(Y,[["render",Z],["__scopeId","data-v-4d8a97a8"]]);var h=(e=>(e[e.STATE_CHECKED=1]="STATE_CHECKED",e[e.STATE_UNCHECKED=0]="STATE_UNCHECKED",e[e.STATE_INDETERMINATE=-1]="STATE_INDETERMINATE",e))(h||{});const K=e=>{const t=Number(e);return isNaN(t)?"":Intl.NumberFormat("ru",{style:"currency",currency:"RUB",maximumFractionDigits:0,minimumFractionDigits:0}).format(Number(t))},q={mask:"#",tokens:{"#":{pattern:/\d/,multiple:!0}},preProcess:e=>e.replace(/\D/g,""),postProcess:e=>{if(!e)return"";const t=2-(e.includes(",")?e.length-e.indexOf(","):0);return`${K(e).slice(0,t?-t:void 0)} ₽`}},te=V({name:"VSort",components:{VIcon:N,VText:C,VFlex:T},emits:["update:modelValue"],props:{modelValue:String},computed:{is_sorted(){return this.$props.modelValue!==void 0},text_color(){return this.is_sorted?"green":"gray"}},methods:{setState(){let e;this.$props.modelValue===void 0?e="desc":this.$props.modelValue==="desc"&&(e="asc"),this.$emit("update:modelValue",e)}}});function oe(e,t,m,g,y,v){const i=r("v-icon"),l=r("v-text");return d(),$(l,{class:M(["v-sort",{"v-sort--asc":e.modelValue==="asc","v-sort--desc":e.modelValue==="desc"}]),as:"button",preset:"basic",color:e.text_color,"hover-color":e.text_color,"active-color":e.text_color,onClick:e.setState},{default:a(()=>[B(e.$slots,"default",{},void 0,!0),o(i,{name:"arrow"})]),_:3},8,["color","hover-color","active-color","class","onClick"])}const ae=E(te,[["render",oe],["__scopeId","data-v-eafec9ed"]]),se=V({name:"VIndeterminateCheckbox",components:{VFlex:T,VIcon:N},emits:["update:modelValue"],props:{modelValue:{type:Number,default:h.STATE_UNCHECKED},name:String,disabled:Boolean},directives:{indeterminate(e,{value:t}){e.indeterminate=t}},computed:{model_value_adapter(){return this.$props.modelValue===h.STATE_INDETERMINATE?h.STATE_INDETERMINATE:Number(this.$props.modelValue)},is_checked(){return this.model_value_adapter!==h.STATE_UNCHECKED},is_indeterminate(){return this.model_value_adapter===h.STATE_INDETERMINATE},checked_proxy:{get(){return this.model_value_adapter===h.STATE_CHECKED},set(e){this.$emit("update:modelValue",Number(e))}},aria_checked(){return this.model_value_adapter===h.STATE_INDETERMINATE?"mixed":String(!!this.model_value_adapter)},state_icon(){return{[h.STATE_INDETERMINATE]:"indeterminate-line",[h.STATE_UNCHECKED]:null,[h.STATE_CHECKED]:"check"}[this.model_value_adapter]}}}),re=["name","id","disabled","aria-checked"],ne=["for"];function ie(e,t,m,g,y,v){const i=r("v-icon"),l=r("v-flex"),p=J("indeterminate");return d(),_("div",{class:M(["v-checkbox",{"v-checkbox--labeled":e.$slots.default,"v-checkbox--disabled":e.disabled,"v-checkbox--checked":e.is_checked}])},[o(l,{class:"v-checkbox__input-container"},{default:a(()=>[W(S("input",{type:"checkbox",name:e.name,id:String(e.$.uid),"onUpdate:modelValue":t[0]||(t[0]=s=>e.checked_proxy=s),disabled:e.disabled,"aria-checked":e.aria_checked},null,8,re),[[X,e.checked_proxy],[p,e.is_indeterminate]]),o(Q,{name:"checkbox-scale",duration:"300"},{default:a(()=>[e.state_icon?(d(),$(i,{key:0,class:"v-checkbox__icon",name:e.state_icon,width:"9",height:"8",color:"white"},null,8,["name"])):k("",!0)]),_:1})]),_:1}),e.$slots.default?(d(),_("label",{key:0,for:String(e.$.uid)},[B(e.$slots,"default",{},void 0,!0)],8,ne)):k("",!0)],2)}const z=E(se,[["render",ie],["__scopeId","data-v-397faeab"]]),de=V({name:"VProductsTableHeader",components:{VCheckbox:z,VInput:H,VButton:R,VFlex:T,VText:C,VSort:ae},data(){return{money_mask:q,min_price_model:"",max_price_model:""}},props:{sort:String},computed:{...A("products",["changed_data","products","selected_products"]),items_on_page(){return this.products.size},checkbox_proxy:{get(){const e=this.selected_products.size;return e===0?h.STATE_UNCHECKED:e===this.products.size?h.STATE_CHECKED:h.STATE_INDETERMINATE},set(e){if(e===h.STATE_UNCHECKED){this.selected_products.clear();return}for(const t of this.products.keys())this.selected_products.add(t)}},quantity_sort_proxy:{get(){return this.getSortProxyValue("quantity")},set(e){this.setSortProxyValue("quantity",e)}},price_sort_proxy:{get(){return this.getSortProxyValue("price")},set(e){this.setSortProxyValue("price",e)}},min_price_sort_proxy:{get(){return this.getSortProxyValue("min_price")},set(e){this.setSortProxyValue("min_price",e)}},max_price_sort_proxy:{get(){return this.getSortProxyValue("max_price")},set(e){this.setSortProxyValue("max_price",e)}}},methods:{...L("products",["setSelectedProductsMaxPrice","setSelectedProductsMinPrice"]),deleteSelected(){console.log("Удалены элементы: ",[...this.selected_products])},commitMinPrice(){this.$refs.minPriceRef&&this.setSelectedProductsMinPrice(Number(this.$refs.minPriceRef.masked_value.unmasked)||void 0)},commitMaxPrice(){this.$refs.maxPriceRef&&this.setSelectedProductsMaxPrice(Number(this.$refs.maxPriceRef.masked_value.unmasked)||void 0)},getSortProxyValue(e){if(this.$props.sort===void 0)return;const[t,m]=this.$props.sort.split(".");if(t===e)return m},setSortProxyValue(e,t){if(t===void 0){this.$emit("update:sort",void 0);return}this.$emit("update:sort",`${e}.${t}`)}}}),le={class:"v-products-table__row"};function ue(e,t,m,g,y,v){const i=r("v-checkbox"),l=r("v-text"),p=r("v-sort"),s=r("v-button"),u=r("v-flex"),b=r("v-input");return d(),$(u,{class:"v-products-table__header",column:"",align:"center",justify:"flex-start"},{default:a(()=>[S("div",le,[o(i,{modelValue:e.checkbox_proxy,"onUpdate:modelValue":t[0]||(t[0]=c=>e.checkbox_proxy=c)},null,8,["modelValue"]),o(l,{preset:"basic",color:"gray",align:"left"},{default:a(()=>[n("Фото")]),_:1}),o(l,{preset:"basic",color:"gray",align:"left"},{default:a(()=>[n("Артикул продавца")]),_:1}),o(l,{preset:"basic",color:"gray",align:"left"},{default:a(()=>[n("Бренд")]),_:1}),o(l,{preset:"basic",color:"gray",align:"left"},{default:a(()=>[n("Название")]),_:1}),o(p,{modelValue:e.quantity_sort_proxy,"onUpdate:modelValue":t[1]||(t[1]=c=>e.quantity_sort_proxy=c)},{default:a(()=>[n("Остаток, шт.")]),_:1},8,["modelValue"]),o(p,{modelValue:e.price_sort_proxy,"onUpdate:modelValue":t[2]||(t[2]=c=>e.price_sort_proxy=c)},{default:a(()=>[n("Текущая цена")]),_:1},8,["modelValue"]),o(p,{modelValue:e.min_price_sort_proxy,"onUpdate:modelValue":t[3]||(t[3]=c=>e.min_price_sort_proxy=c)},{default:a(()=>[n("Минимальная цена")]),_:1},8,["modelValue"]),o(p,{modelValue:e.max_price_sort_proxy,"onUpdate:modelValue":t[4]||(t[4]=c=>e.max_price_sort_proxy=c)},{default:a(()=>[n("Максимальная цена")]),_:1},8,["modelValue"]),o(l,{preset:"basic",color:"gray",width:"67px"},{default:a(()=>[n("Удалить")]),_:1})]),S("div",{class:M(["v-products-table__row v-products-table__header-actions",{"v-products-table__header-actions--hidden":e.selected_products.size===0}])},[o(u,{class:"v-products-table__header-actions-buttons",row:"",gap:"10",align:"center",justify:"flex-start"},{default:a(()=>[o(l,{nowrap:""},{default:a(()=>[n("Выбрано "+f(e.selected_products.size)+" из "+f(e.items_on_page),1)]),_:1}),o(s,{prepend:"delete-bold",color:"gray","icon-size":"15",thin:"",onClick:e.deleteSelected},{default:a(()=>[n("Удалить выделенные")]),_:1},8,["onClick"])]),_:1}),o(l,{class:"v-products-table__header-text",preset:"basic",align:"right",nowrap:""},{default:a(()=>[n("Для всех выделенных")]),_:1}),o(u,{class:"v-products-table__header-input",width:"100%",height:"100%",justify:"center",align:"center"},{default:a(()=>[o(b,{class:"v-products-table__header-min-price",placeholder:"₽",mask:e.money_mask,thin:"",onBlur:e.commitMinPrice,ref:"minPriceRef",modelValue:e.min_price_model,"onUpdate:modelValue":t[5]||(t[5]=c=>e.min_price_model=c),onSubmit:e.commitMinPrice},null,8,["mask","onBlur","modelValue","onSubmit"])]),_:1}),o(u,{class:"v-products-table__header-input",width:"100%",height:"100%",justify:"center",align:"center"},{default:a(()=>[o(b,{class:"v-products-table__header-max-price",placeholder:"₽",mask:e.money_mask,thin:"",onBlur:e.commitMaxPrice,ref:"maxPriceRef",modelValue:e.max_price_model,"onUpdate:modelValue":t[6]||(t[6]=c=>e.max_price_model=c),onSubmit:e.commitMaxPrice},null,8,["mask","onBlur","modelValue","onSubmit"])]),_:1})],2)]),_:1})}const pe=E(de,[["render",ue],["__scopeId","data-v-d5ba8ede"]]),ce="/zonesmart/assets/fallback-CdO81hhX.png",_e=V({name:"VImage",props:{src:{type:String,required:!0},alt:String,title:String,fallback:{type:String,default:ce}},data(){return{is_loading:!0,is_error:!1}},methods:{onLoad(){this.is_loading=!1},onError(){this.is_loading=!1,this.is_error=!0}},mounted(){const e=this.$refs.image;e.addEventListener("load",this.onLoad,{once:!0}),e.addEventListener("error",this.onError,{once:!0})},beforeUnmount(){const e=this.$refs.image;e.removeEventListener("load",this.onLoad),e.removeEventListener("error",this.onError)}}),me=["src","alt","title"];function ge(e,t,m,g,y,v){return d(),_("div",{class:M(["v-image",{"v-image--loading":e.is_loading}])},[S("img",{src:e.is_error?e.fallback:e.src,alt:e.alt,title:e.title,loading:"lazy",ref:"image"},null,8,me)],2)}const he=E(_e,[["render",ge],["__scopeId","data-v-a052d330"]]),fe=V({name:"VProductsTableRow",components:{VImage:he,VInput:H,VText:C,VIcon:N,VFlex:T,VCheckbox:z},data(){return{min_price:"",max_price:"",money_mask:q}},props:{productId:{type:String,required:!0}},computed:{...A("products",["products","changed_data","selected_products"]),current_product(){return this.products.get(this.$props.productId)},changed_values(){return this.changed_data.get(this.$props.productId)},checked_proxy:{get(){return this.selected_products.has(this.$props.productId)},set(e){if(!e){this.selected_products.delete(this.$props.productId);return}this.selected_products.add(this.$props.productId),this.setProductsMinMaxPrice(this.$props.productId)}},min_price_proxy:{get(){var e;return((e=this.changed_values)==null?void 0:e.min_price)??this.current_product.min_price},set(e){this.changed_values===void 0&&this.changed_data.set(this.$props.productId,{min_price:this.current_product.min_price}),this.changed_values.min_price=e}},max_price_proxy:{get(){var e;return((e=this.changed_values)==null?void 0:e.max_price)??this.current_product.max_price},set(e){this.changed_values===void 0&&this.changed_data.set(this.$props.productId,{max_price:this.current_product.max_price}),this.changed_values.max_price=e}}},methods:{...L("products",["setProductsMinMaxPrice"]),formatRub:K,copyToClipboard(){"clipboard"in navigator&&navigator.clipboard.writeText(this.current_product.remote_id)}}}),ve={class:"v-products-table__row v-products-table__row-item"};function be(e,t,m,g,y,v){const i=r("v-checkbox"),l=r("v-image"),p=r("v-icon"),s=r("v-text"),u=r("v-flex"),b=r("v-input");return d(),_("div",ve,[o(i,{modelValue:e.checked_proxy,"onUpdate:modelValue":t[0]||(t[0]=c=>e.checked_proxy=c)},null,8,["modelValue"]),o(l,{src:e.current_product.images[0],alt:e.current_product.title,title:e.current_product.title},null,8,["src","alt","title"]),e.current_product.remote_id?(d(),$(u,{key:0,is:"button",align:"center",justify:"flex-start",row:"",onClick:e.copyToClipboard},{default:a(()=>[o(p,{name:"link",color:"gray"}),o(s,{preset:"basic"},{default:a(()=>[n(f(e.current_product.remote_id),1)]),_:1})]),_:1},8,["onClick"])):(d(),$(s,{key:1,preset:"basic"})),o(s,{ellipsis:"",nowrap:"",align:"left"},{default:a(()=>[n(f(e.current_product.brand_name),1)]),_:1}),o(s,{ellipsis:"",nowrap:"",align:"left"},{default:a(()=>[n(f(e.current_product.title),1)]),_:1}),o(s,{ellipsis:"",nowrap:"",align:"left"},{default:a(()=>[n(f(e.current_product.quantity),1)]),_:1}),o(s,{ellipsis:"",nowrap:"",align:"left"},{default:a(()=>[n(f(e.formatRub(e.current_product.price)),1)]),_:1}),o(u,{class:"v-products-table__row-item-input",width:"100%",height:"100%",justify:"center",align:"center"},{default:a(()=>[o(b,{modelValue:e.min_price_proxy,"onUpdate:modelValue":t[1]||(t[1]=c=>e.min_price_proxy=c),mask:e.money_mask,thin:"",placeholder:"₽"},null,8,["modelValue","mask"])]),_:1}),o(u,{class:"v-products-table__row-item-input",width:"100%",height:"100%",justify:"center",align:"center"},{default:a(()=>[o(b,{modelValue:e.max_price_proxy,"onUpdate:modelValue":t[2]||(t[2]=c=>e.max_price_proxy=c),mask:e.money_mask,thin:"",placeholder:"₽"},null,8,["modelValue","mask"])]),_:1}),o(u,{justify:"flex-start",align:"center",width:"100%",height:"100%",row:""},{default:a(()=>[o(p,{name:"delete",color:"gray","active-color":"gray","hover-color":"gray",button:""})]),_:1})])}const ye=E(fe,[["render",be],["__scopeId","data-v-7ee66f3f"]]),D=(e,t,m)=>m<e?e:m>t?t:m,$e=V({components:{VSkeleton:U,VButton:R,VFlex:T},emits:["update:modelValue"],props:{modelValue:{type:Number,default:0,validator:(e,t)=>Number(t.total)>=e},total:{type:Number,default:0},justify:{type:String,default:"flex-end"},disabled:Boolean,loading:Boolean},computed:{page(){return D(1,this.$props.total,this.$props.modelValue)},should_collapse(){return this.total>7},should_collapse_left(){return this.should_collapse&&this.page>5},should_collapse_right(){return this.should_collapse&&this.page<this.$props.total-4},visible_buttons_amount_left(){return D(0,2,this.page-2)},visible_buttons_amount_right(){return D(0,2,this.$props.total-this.page-1)}},methods:{setPage(e){this.$emit("update:modelValue",e)},setLeftHalf(){this.setPage(Math.ceil((this.page-1)/2))},setPageNotCollapsed(e){e!==this.page&&this.setPage(e)},setRightHalf(){this.setPage(this.page+Math.ceil((this.$props.total-this.page)/2))}}}),ke={key:0},Ve={key:0},Ee={key:1},Te=["onClick"],Pe={key:2},Se={key:3};function Ce(e,t,m,g,y,v){const i=r("v-button"),l=r("v-flex"),p=r("v-skeleton");return e.total>1?(d(),$(p,{key:0,loading:e.loading,width:"480",height:"40"},{default:a(()=>[o(l,{class:"v-pagination",width:"max-content",row:"",height:"40",justify:e.justify,is:"ul",gap:"4"},{default:a(()=>[+e.page!=1?(d(),_("li",ke,[o(i,{class:"v-pagination__button v-pagination__arrow-left",prepend:"arrow",color:"transparent","no-border":"","text-preset":"basic",onClick:t[0]||(t[0]=s=>e.setPage(+e.page-1)),disabled:e.disabled},null,8,["disabled"])])):k("",!0),e.should_collapse?(d(),_(P,{key:2},[+e.page!=1?(d(),_("li",Ve,[o(i,{class:"v-pagination__button",color:"transparent","no-border":"","text-preset":"basic",onClick:t[1]||(t[1]=s=>e.setPage(1)),disabled:e.disabled},{default:a(()=>[n("1")]),_:1},8,["disabled"])])):k("",!0),e.should_collapse_left?(d(),_("li",Ee,[o(i,{class:"v-pagination__button",color:"transparent","no-border":"","text-preset":"basic",onClick:e.setLeftHalf,disabled:e.disabled},{default:a(()=>[n("...")]),_:1},8,["onClick","disabled"])])):k("",!0),(d(!0),_(P,null,I(Number(e.visible_buttons_amount_left),s=>(d(),_("li",{key:+e.page-e.visible_buttons_amount_left+s-1},[o(i,{class:"v-pagination__button",color:"transparent","no-border":"","text-preset":"basic",onClick:u=>e.setPage(+e.page-e.visible_buttons_amount_left+s-1),disabled:e.disabled},{default:a(()=>[n(f(+e.page-e.visible_buttons_amount_left+s-1),1)]),_:2},1032,["onClick","disabled"])]))),128)),S("li",null,[o(i,{class:"v-pagination__button",color:"gray","no-border":"","text-preset":"basic",disabled:e.disabled},{default:a(()=>[n(f(e.page),1)]),_:1},8,["disabled"])]),(d(!0),_(P,null,I(Number(e.visible_buttons_amount_right),s=>(d(),_("li",{key:+e.page+s,onClick:u=>e.setPage(+e.page+s)},[o(i,{class:"v-pagination__button",color:"transparent","no-border":"","text-preset":"basic",disabled:e.disabled},{default:a(()=>[n(f(+e.page+s),1)]),_:2},1032,["disabled"])],8,Te))),128)),e.should_collapse_right?(d(),_("li",Pe,[o(i,{class:"v-pagination__button",color:"transparent","no-border":"","text-preset":"basic",onClick:e.setRightHalf,disabled:e.disabled},{default:a(()=>[n("...")]),_:1},8,["onClick","disabled"])])):k("",!0),+e.total!=+e.page?(d(),_(P,{key:3},[e.should_collapse&&+e.page===e.total-4?(d(),_("li",{key:0,onClick:t[2]||(t[2]=s=>e.setPage(e.total))},[o(i,{class:"v-pagination__button",color:"transparent","no-border":"","text-preset":"basic",disabled:e.disabled},{default:a(()=>[n(f(e.total-1),1)]),_:1},8,["disabled"])])):k("",!0),S("li",{onClick:t[3]||(t[3]=s=>e.setPage(e.total))},[o(i,{class:"v-pagination__button",color:"transparent","no-border":"","text-preset":"basic",disabled:e.disabled},{default:a(()=>[n(f(e.total),1)]),_:1},8,["disabled"])])],64)):k("",!0)],64)):(d(!0),_(P,{key:1},I(Number(e.total),s=>(d(),_("li",{key:s},[o(i,{class:"v-pagination__button",color:+e.page===s?"gray":"transparent","no-border":"","text-preset":"basic",onClick:u=>e.setPageNotCollapsed(s),disabled:e.disabled},{default:a(()=>[n(f(s),1)]),_:2},1032,["color","onClick","disabled"])]))),128)),+e.page!=+e.total?(d(),_("li",Se,[o(i,{class:"v-pagination__button v-pagination__arrow-right",prepend:"arrow",color:"transparent","no-border":"","text-preset":"basic",onClick:t[4]||(t[4]=s=>e.setPage(+e.page+1)),disabled:e.disabled},null,8,["disabled"])])):k("",!0)]),_:1},8,["justify"])]),_:1},8,["loading"])):k("",!0)}const x=E($e,[["render",Ce],["__scopeId","data-v-1c3172ba"]]),we=V({name:"VProductsTable",components:{VText:C,VPagination:x,VProductsTableRow:ye,VFlex:T,VProductsTableHeader:pe},emits:["update:pagination"],data(){return{sort:void 0}},props:{pagination:{type:Number,default:1},per_page:{type:Number,default:10}},computed:{...A("products",["products","total_amount"]),pagination_proxy:{get(){return this.$props.pagination},set(e){this.$emit("update:pagination",e)}},pages_amount(){return Math.ceil(this.total_amount/this.$props.per_page)},sorted_product_ids(){const e=[...this.products.values()];if(this.sort===void 0)return e.map(({id:g})=>g);const[t,m]=this.sort.split(".");return e.sort((g,y)=>{const v=g[t]??Number.MIN_SAFE_INTEGER,i=y[t]??Number.MIN_SAFE_INTEGER;return m==="asc"?i-v:v-i}).map(({id:g})=>g)}}});function Ie(e,t,m,g,y,v){const i=r("v-products-table-header"),l=r("v-products-table-row"),p=r("v-pagination"),s=r("v-flex");return d(),$(s,{class:"v-products-table",column:"",width:"100%",gap:"0"},{default:a(()=>[o(i,{sort:e.sort,"onUpdate:sort":t[0]||(t[0]=u=>e.sort=u)},null,8,["sort"]),(d(!0),_(P,null,I(e.sorted_product_ids,u=>(d(),$(l,{key:u,"product-id":u},null,8,["product-id"]))),128)),o(p,{class:"v-products-table__pagination",total:e.pages_amount,modelValue:e.pagination_proxy,"onUpdate:modelValue":t[1]||(t[1]=u=>e.pagination_proxy=u)},null,8,["total","modelValue"])]),_:1})}const Ne=E(we,[["render",Ie],["__scopeId","data-v-51aab389"]]),Me=V({name:"VProducts",components:{VPagination:x,VSkeleton:U,VProductsTable:Ne,VProductsAdd:ee,VIcon:N,VText:C,VFlex:T},mixins:[F],data(){return{pagination:1}},computed:{...j(["is_loading"]),...A("products",["total_amount","products"]),is_products_loading(){return this.is_loading(w.LIST)}},methods:{...L("products",["fetchProducts"]),changePaginationPage(e){this.pagination=e,this.fetchItems()},async fetchItems(){await this.fetchProducts({options:{signal:this.requestStart(w.LIST),per_page:10,page:this.pagination}}),this.requestEnd(w.LIST)}},beforeMount(){this.fetchItems()}});function Ae(e,t,m,g,y,v){const i=r("v-icon"),l=r("v-text"),p=r("v-skeleton"),s=r("v-flex"),u=r("v-products-add"),b=r("v-products-table");return d(),$(s,{class:"v-products",column:"",paper:"",width:"100%",height:"min-content",gap:"30",align:"flex-start",justify:"flex-start"},{default:a(()=>[o(s,{row:"",width:"100%",gap:"20",align:"flex-end",justify:"flex-start"},{default:a(()=>[o(l,{class:"v-products__title",preset:"h2",as:"h1"},{default:a(()=>[n("Мои товары"),o(i,{name:"question"})]),_:1}),o(p,{width:"55",height:"20",loading:e.is_products_loading},{default:a(()=>[o(l,{preset:"basic",color:"gray","line-height":"20"},{default:a(()=>[n(f(e.products.size)+" из "+f(e.total_amount),1)]),_:1})]),_:1},8,["loading"])]),_:1}),o(s,{column:"",gap:"20"},{default:a(()=>[o(l,{align:"left",preset:"basic"},{default:a(()=>[n("Добавьте товары вашего магазина из одной товарной и ценовой категории (разница цены не больше 15%)")]),_:1}),o(l,{align:"left",preset:"basic"},{default:a(()=>[n("Для добавления нескольких товаров введите несколько артикулов через запятую или используя клавишу Enter")]),_:1})]),_:1}),o(u),o(p,{loading:e.is_products_loading},{default:a(()=>[o(b,{pagination:e.pagination,"onUpdate:pagination":e.changePaginationPage},null,8,["pagination","onUpdate:pagination"])]),_:1},8,["loading"])]),_:1})}const De=E(Me,[["render",Ae],["__scopeId","data-v-60f061f7"]]),Ue=V({name:"Products",components:{VProducts:De,MainLayout:G}});function Re(e,t,m,g,y,v){const i=r("v-products"),l=r("main-layout");return d(),$(l,null,{default:a(()=>[o(i)]),_:1})}const je=E(Ue,[["render",Re],["__scopeId","data-v-3de1eeed"]]);export{je as Products};
